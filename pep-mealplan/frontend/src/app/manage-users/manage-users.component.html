<div class="container">
  <div class="user-list-box">
    <div class="filter-form">
      <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()" placeholder="Suchen..." />
    </div>
    @if (!searchLoading) {
      <ul class="user-list">
        @for (user of filteredUsers(); track user) {
          <li class="user-item">
            <span>{{ user.Firstname }} {{ user.Lastname }}
              @if (user.DOB) {
                <small>({{ user.DOB | date: 'dd.MM.yyyy' }})</small>
              }</span>
              <button class="delete-button" (click)="deleteUser(user)">
                Löschen
              </button>
            </li>
          }
          @if (filteredUsers().length === 0) {
            <li class="no-users-message">
              Keine Benutzer gefunden.
            </li>
          }
        </ul>
      } @else {
        <div class="list-loading">
          <mat-spinner></mat-spinner>
        </div>
      }
    </div>

    <div class="user-form">
      <h2>Neue Person hinzufügen</h2>
      <div class="form-group">
        <label for="firstName">Vorname</label>
        <input
          type="text"
          id="firstName"
          [(ngModel)]="newUser.Firstname"
          placeholder="Vorname"
          />
        </div>
        <div class="form-group">
          <label for="lastName">Nachname</label>
          <input
            type="text"
            id="lastName"
            [(ngModel)]="newUser.Lastname"
            placeholder="Nachname"
            />
          </div>
          @if (showDobInput) {
            <div class="form-group" id="dobInput">
              <label for="dob">Geburtsdatum (benötigt weil es eine andere Person mit diesem Namen gibt)</label>
              <input type="date" id="dobInput" [(ngModel)]="newUser.DOB" placeholder="Geburtsdatum" />
            </div>
          }
          <div class="button-container">
            <button (click)="addUser()">Hinzufügen</button>
          </div>
        </div>
      </div>
